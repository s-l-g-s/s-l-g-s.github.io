function WindField(a){this.windAngle=180,this.targetWindAngle=270,this.resolution=a,this.cols=width/this.resolution,this.rows=height/this.resolution,this.make2Darray=function(c){for(var d=[],e=0;e<c;e++)d[e]=[];return d},this.field=this.make2Darray(this.cols),this.init=function(){for(var e,c=0,d=0;d<this.cols;d++){e=0;for(var g,f=0;f<this.rows;f++)g=map(noise(c,e),0,1,radians(this.windAngle-90),radians(this.windAngle+90)),this.field[d][f]=createVector(cos(g),sin(g)),e+=0.1;c+=0.1}},this.init(),this.update=function(){this.windAngle+=0.01*(this.targetWindAngle-this.windAngle),this.init()},this.setAngle=function(c){this.targetWindAngle=c},this.lookup=function(c){var d=Math.floor(constrain(c.x/this.resolution,0,this.cols-1)),e=Math.floor(constrain(c.y/this.resolution,0,this.rows-1));return this.field[d][e].copy()}}